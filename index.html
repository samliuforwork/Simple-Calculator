<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>鋼構柱配置輔助工具</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="app">
    <header class="app__header">
      <h1>鋼構柱配置輔助工具</h1>
      <p>同一個頁面內提供「柱高 / 斜梁示意」與原本的「等距鐵條排布」兩個工具，透過頁籤快速切換。</p>
    </header>

    <div class="tab-bar" role="tablist" aria-label="工具選單">
      <button type="button" class="tab is-active" role="tab" aria-selected="true" aria-controls="columnTab" data-tab="columnTab">
        柱高 + 斜梁
      </button>
      <button type="button" class="tab" role="tab" aria-selected="false" aria-controls="spacingTab" data-tab="spacingTab">
        等距鐵條排布
      </button>
    </div>

    <section id="columnTab" class="tab-panel is-active" role="tabpanel">
      <div class="column-intro">
        <h2>簡易鋼構立面 CAD（含柱寬兩端高差 + 可視化截面）</h2>
        <p class="description">
          - 柱1 與最後一支柱的高度可設定，其餘柱高可「自動斜率內插」或「手動輸入」。<br>
          - 距離可用「總長度均分」或「自訂每跨柱距（不等距）」。<br>
          - 顯示：柱位置尺寸、多排長度尺寸、各柱高度、各跨 H 鋼斜長與坡度。<br>
          - 柱截面深度只影響圖面柱寬，不參與 ΔH 計算。<br>
          - 輸入最低點與最高點或手動輸入每個柱高<br>
          - 距離可用「總長度均分」或「自訂跨距」。<br>
          - 總長度尺寸包外，高度為中心，每柱距離為中心。<br>
          - 起頭柱與最尾柱ΔH，中間柱ΔH÷ 2。<br>
        </p>
      </div>

      <div class="grid two-col">
        <div class="card">
          <h2>輸入參數</h2>
          <form id="columnForm" novalidate>
            <div class="section-title">柱子高度設定</div>
            <div class="form-row" id="hStartRow">
              <label for="colHStart">最低點</label>
              <input id="colHStart" type="number" step="0.001" placeholder="例如 3000">
              <span class="unit-label">mm</span>
            </div>
            <div class="form-row" id="hEndRow">
              <label for="colHEnd">最高點</label>
              <input id="colHEnd" type="number" step="0.001" placeholder="例如 5000">
              <span class="unit-label">mm</span>
            </div>

            <div class="form-row">
              <label>高度模式</label>
              <div class="mode-options">
                <label>
                  <input type="radio" name="heightMode" value="slopeAuto" checked>
                  最低與最高點(自動求出斜率)
                </label>
                <label>
                  <input type="radio" name="heightMode" value="customHeights">
                  手動輸入每支柱高度
                </label>
              </div>
            </div>

            <div class="form-row is-hidden" id="heightListRow">
              <label for="heightList">每柱高度(中心)</label>
              <textarea id="heightList" placeholder="依序輸入柱1, 柱2, 柱3... 例如：3000, 3654, 4321, 5000"></textarea>
            </div>

            <div class="section-title">柱數與距離模式</div>
            <div class="form-row">
              <label for="middleCount">中間柱數量</label>
              <input id="middleCount" type="number" step="1" min="0" placeholder="例如 2">
              <span class="unit-label">未輸入為自訂模式</span>
            </div>

            <div class="form-row">
              <label>距離輸入方式</label>
              <div class="mode-options">
                <label>
                  <input type="radio" name="lengthMode" value="totalEven" checked>
                  總長度)
                </label>
                <label>
                  <input type="radio" name="lengthMode" value="customSpans">
                  手輸跨距
                </label>
              </div>
            </div>

            <div class="form-row" id="totalLengthRow">
              <label for="colTotalLength">總長度（包外）</label>
              <input id="colTotalLength" type="number" step="0.001" placeholder="例如 8000">
              <span class="unit-label">mm</span>
            </div>

            <div class="form-row is-hidden" id="customSpansRow">
              <label for="spanList">各跨柱距列表</label>
              <textarea id="spanList" placeholder="例如：3000, 2500, 2500（共 3 跨）"></textarea>
            </div>

            <div class="section-title">H鋼規格</div>
            <div class="form-row">
              <label for="columnDepth">規格</label>
              <input id="columnDepth" type="number" step="0.001" value="100">
              <span class="unit-label">mm（例如 H100, H200）</span>
            </div>

            <button type="submit">
              🧮 開始計算
            </button>
          </form>
          <div class="results" id="columnResults"></div>
        </div>

        <div class="card canvas-card">
          <h2>立面示意圖（非比例）</h2>
          <canvas id="columnCanvas" width="700" height="430"></canvas>
          <div class="legend">
            <div class="badge">
              <span class="line-column"></span> 柱子（有寬度）
            </div>
            <div class="badge">
              <span class="line-beam"></span> H 鋼斜梁（柱頂相連 + 柱寬上的斜接線）
            </div>
            <div class="badge">
              <span class="line-ground"></span> 基準地面線 + 多排尺寸
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="spacingTab" class="tab-panel" role="tabpanel" aria-hidden="true">
      <div class="card">
        <h2>等距鐵條排布</h2>
        <form id="spacingForm" novalidate>
          <div class="row">
            <label>總長度 (mm)
              <input type="number" id="totalLength" step="0.01" required>
            </label>
            <label>鐵條寬度 (mm)
              <input type="number" id="barWidth" step="0.01" required>
            </label>
          </div>
          <div class="row">
            <label>指定根數
              <input type="number" id="inputCount" min="1" step="1">
            </label>
            <label>指定間距 (mm)
              <input type="number" id="inputSpacing" step="0.01" min="0">
            </label>
          </div>
          <button type="submit" class="sr-only">計算</button>
        </form>
        <canvas id="previewCanvas"></canvas>
        <div id="spacingResults" class="results"></div>
      </div>
    </section>
  </div>
  <script type="module" src="script.js"></script>
</body>
</html>
